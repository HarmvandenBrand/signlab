<!doctype html>
<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Sign Language Translation COVID-19</title>

<meta http-equiv="Access-Control-Allow-Origin" content="*">
<meta http-equiv="Access-Control-Allow-Methods" content="GET">
<meta http-equiv="Access-Control-Allow-Methods" content="POST">

<!-- Meta tag to make the website responsive to different types of devices -->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Icon -->
<link rel="icon" type="image/x-icon" href="images/hand-icon.png" />

<!-- =============================================== -->
<!-- Fonts -->

<!-- Fonts for grayscale theme -->
<script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />

<!-- =============================================== -->
<!-- CSS files -->

<!-- CSS for Jquery autocomplete and tooltips -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css"></link>
<!-- Bootstrap core CSS -->
<link rel="stylesheet" href="css/bootstrap.min.css">
<!-- CSS for question circle -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<!-- CSS file for bootstrap grayscale theme -->
<link rel="stylesheet" href="css/grayscalestyles.css">
<!-- CSS file for avatar panel and controls, taken from the UEA website but reduced in order to avoid clashes with bootstrap css -->
<link rel="stylesheet" href="css/cwasa-reduced.css">

<!-- CSS for autocomplete form -->
<!-- <link rel="stylesheet" href="css/autocomp.css"></link> -->


<!-- =============================================== -->
<!-- Javascripts (more scripts are loaded at the very end, somehow the placement matters) -->

<!-- jQuery -->
<script type="text/javascript" src="js/jquery.min.js"></script>

<!-- jquery ui -->
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script type="text/javascript">
//Solves naming conflicts between jquery ui and bootstrap
  $.widget.bridge('uitooltip', $.ui.tooltip);
  $.widget.bridge('uibutton', $.ui.button);
</script>

<!-- Bootstrap tooltips -->
<script type="text/javascript" src="js/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="js/bootstrap.min.js"></script>


<!-- Grayscale theme JS-->
<script type="text/javascript" src="js/grayscalescript.js"></script>
<!-- Javascript for smooth scrolling-->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>


<!-- Autocomplete JS-->
<!-- <script type="text/javascript" src="js/autocomp.js"></script> -->


<!-- script for generating avatar animations -->
<script type="text/javascript" src="cwa/allcsa.js"> </script>


<!-- =============================================== -->

<script language="javascript">

function playURL(surl) {
	CWASA.playSiGMLURL(surl);
}

function playText(stext) {
	CWASA.playSiGMLText(stext);
}

// verandert de source van de embedded video
function changeVideo(url) {
  // window.frames['videos'].location.replace(url);
  // // document.getElementById('videos').src = "https://www.youtube-nocookie.com/embed/f7xMGTE7D5w";
  // document.getElementById('test').innerHTML = document.getElementById('videos').src;
  var frame=document.getElementById("videoHolder");
  var clone=frame.cloneNode(true);
  clone.setAttribute('src',url);
  frame.parentNode.replaceChild(clone,frame);
}

function addStatus(evt) {
	var elt = document.getElementById("myStatusLog");
	var msg = evt.msg;
	if (evt.av != "*") {
		msg = "[av" + evt.av + "] " + msg;
	}
	elt.value = elt.value + msg + "\n";
}
CWASA.addHook("status", addStatus);

var lggr = CWASA.getLogger("CWASA", "trace");

function setFPS(evt) {
	var elt = document.getElementById("myFPS");
	elt.value = evt.msg.toFixed(2);
}
CWASA.addHook("avatarfps", setFPS, 0);

function setSignFrame(evt) {
	var msg = evt.msg;
	var elt = document.getElementById("mySF");
	elt.value = (msg.s+1)+"/"+(msg.f+1);
	elt = document.getElementById("myGloss");
	elt.value = msg.g;
}
CWASA.addHook("avatarsign", setSignFrame, 0);

</script>


<script>
var flag = "";

function changeFunc(myRadio) {
  if (myRadio.value == "fingerspell") {
    document.getElementById("avatar").setAttribute("class", "CWASAAvatar av0");
    document.getElementById("explanation").setAttribute("class", "undisplayed");
    document.getElementById("explText").setAttribute("class", "undisplayed");
    document.getElementById("speedAdj").setAttribute("class", "CWASASpeed av0");
    document.getElementById("outputGloss").setAttribute("class", "txtGloss av0");
    document.getElementById("glossLabel").style.display = 'inline-block';
    document.getElementById("speedLabel").style.display = 'inline-block';
    document.getElementById("stopButton").setAttribute("class", "btn btn-primary displayed");
    flag = "spell";
  }
  else if (myRadio.value == "freestyle") {
    document.getElementById("avatar").setAttribute("class", "CWASAAvatar av0");
    document.getElementById("explanation").setAttribute("class", "undisplayed");
    document.getElementById("explText").setAttribute("class", "undisplayed");
    document.getElementById("speedAdj").setAttribute("class", "CWASASpeed av0");
    document.getElementById("outputGloss").setAttribute("class", "txtGloss av0");
    document.getElementById("glossLabel").style.display = 'inline-block';
    document.getElementById("speedLabel").style.display = 'inline-block';
    document.getElementById("stopButton").setAttribute("class", "btn btn-primary displayed");
    flag = "";
  }
  else if (myRadio.value == "explain") {
    document.getElementById("avatar").setAttribute("class", "undisplayed");
    document.getElementById("explanation").setAttribute("class", "explSpan");
    document.getElementById("explText").setAttribute("class", "explSiGML");
    document.getElementById("speedAdj").setAttribute("class", "undisplayed");
    document.getElementById("outputGloss").setAttribute("class", "undisplayed");
    document.getElementById("glossLabel").style.display = 'none';
    document.getElementById("speedLabel").style.display = 'none';
    document.getElementById("stopButton").setAttribute("class", "btn btn-primary undisplayed");
    flag = "explain";
  }
}

///Makes an ajax call to the python script (by way of a php wrapper)
function callPython(text) {
  showBusyState();
  //Adds a flag to the input if applicable
  if (flag != ""){
    inputPython = flag + " " + text;
  }
  else{
    inputPython = text;
  }
  $.ajax({
    url : 'pythonCall.php',
    type : 'POST',
    data: {"input": inputPython},
    dataType: "json",
    success : onSuccess,
    error : onError,
  });
  function onSuccess(result) {
    if (result.errorcode) {
      console.log('Error '+result.errorcode+' occured on the server. Error message: '+result.error);
    } else {
      output = result.output.split(";");
      if (output[0].slice(0,5) == "HamNo" || output[0].trim() == text){
        if (flag == "explain"){
          parent = document.querySelector('#explText');
          console.log(output);
          //Ensures newlines and tabs in output are displayed in div
          var pre = document.createElement("pre");
          pre.appendChild(document.createTextNode(output));
          if (parent.childNodes.length != 0) {
            parent.removeChild(parent.childNodes[0])    
          }
          parent.append(pre);
        }
        else{
          console.log(output[1]);
          console.log(output[2]);
          document.getElementById("translation").value = output[1];
          playText(output[2].trim());
        }
      }
      else{
        alert(output);
      }
      
    }
    showBusyState(false);
  }
  function onError(xhr, error) {
    console.log ('Something went wrong. Error message: '+error);
    showBusyState(false);
  }
  function showBusyState(state) {
    $(document.body).toggleClass('busy', state===undefined?true:state);
  }
}

//Stores suggestions
function addSuggestion(text){
  showBusyState();
  $.ajax({
    url : 'suggestions.php',
    type : 'POST',
    data: {"input": text},
    dataType: "json",
    success : onSuccess,
    error : onError,
  });
  function onSuccess(result) {
    showBusyState(false);
  }
  function onError(xhr, error) {
    console.log ('Something went wrong. Error message: '+error);
    showBusyState(false);
  }
  function showBusyState(state) {
    $(document.body).toggleClass('busy', state===undefined?true:state);
  }
}

// function displayInfo(id){
//   document.getElementById(id).setAttribute("class", "displayInfo");
// }

// function undisplayInfo(id){
//   document.getElementById(id).setAttribute("class", "undisplayed");
// }

//Enables all tooltips in the document
$(document).ready(function(){
  $('[data-toggle="tooltip"]').tooltip();
});


</script>


</head>

<!-- <body onload="CWASA.init(); brython(1);"> -->
<!-- <body onload="brython(1);"> -->

<!--================================================================-->
<!--================================================================-->
<!--================================================================-->
<!--================================================================-->

<body id="page-top" onload="CWASA.init();">


<!--================================================================-->


<!-- Navigation-->
<nav class="navbar navbar-shrink navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">
        <img src="images/hand-icon.png" height="25">
          SignLab Amsterdam
        </a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#About">Mission</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Translate">Demos</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#People">People</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Publications">Publications</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Funding">Funding</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Tutorial">Tutorial</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Resources">Resources</a></li>
                <li class="nav-item"><a class="nav-link" href="index-nl.html">NL</a></li>
            </ul>
        </div>
    </div>
</nav>

<!-- Masthead-->
<!-- <header class="masthead">
    <div class="container d-flex h-100 align-items-center">
        <div class="mx-auto text-center">
            <h1 class="mx-auto my-0 text-uppercase">SignTranslation</h1>
            <h2 class="text-white-50 mx-auto mt-2 mb-5">Helps medics communicate with deaf patients.</h2>
            <a class="btn btn-primary js-scroll-trigger" href="#about">Get Started</a>
        </div>
    </div>
</header>
 -->


<!--================================================================-->

<!-- About -->
<section class="projects-section bg-light" id="About">
    <div class="container">
        <!-- Challenge Row-->
        <div class="row justify-content-center no-gutters mb-2 mb-lg-0">
                <div class="project-text pb-1 w-100 my-auto text-center text-lg-left">
                    <h4>Sign language: Linguistic structure made visible</h4>
                    <p class="mb-4">
                      <!-- <img src="img/elise-1.jpg" class="rounded float-right" alt="" height="300"> -->
                      Investigating sign languages has the potential to yield important linguistic insights which are much more difficult to obtain by investigating spoken languages alone, because linguistic structures are sometimes much easier to detect in sign languages than in spoken languages. Quite literally, sign languages often make linguistic structure <b><a href="https://doi.org/10.1515/tl-2018-0012" target="_blank">directly visible</a></b>.
                    </p>
                    <hr class="d-none d-lg-block mb-0 ml-0" />
                </div>
                <div class="project-text pb-1 w-100 my-auto text-center text-lg-left">
                    <h4>Breaking language barriers</h4>
                    <p class="mb-4">
                      Not only can science benefit from investigating sign languages; it also has an important role to play in diminishing the 
                      <b><a href="https://beeldverhalen.npofocus.nl/waarom-is-gebarentaal-nodig/?fbclid=IwAR3_XDN8TnlzN_WZ1l-jfN9rYIXkH_XmyOyNSgVzBREox3cxArkTL-k2G2I" target="_blank">language barrier</a></b> between deaf and hearing people. Deeper insights into the grammar of sign languages are essential in training sign language interpreters and to lay a solid foundation for sign language machine translation.
                    </p>
                    <hr class="d-none d-lg-block mb-0 ml-0" />
                </div>
                <div class="project-text pb-1 w-100 my-auto text-center text-lg-left">
                    <h4>Our mission</h4>
                    <p class="mb-4">
                      We are pursuing deeper insights into sign language grammar, and we are using these insights to develop a machine translation system that can translate sentences from Dutch into Sign Language of the Netherlands (NGT), displayed by means of an animated avatar. We intend to apply this system in several settings, in particular to support parents of deaf children in the early stages of learning sign language and to 
                      <b><a href="covid19/index.html" target="_blank">
                        improve communication between health care professionals and deaf patients.
                      </a></b>
                    <hr class="d-none d-lg-block mb-0 ml-0" />
                </div> 
            </div>
    </div>
</section>



<!--================================================================-->

<!-- Translate -->

<section class="projects-section bg-white" id="Translate">
    <div class="container" height="100%">
        <!-- CWA signing avatar panel 0 -->
        <!--================================================================-->
        <!-- <div class="CWASAPanel av0" align="center" ></div> -->
        <span id="avatar" class="CWASAAvatar av0" align="left" ></span>
        <span id="explanation" class="undisplayed" align="left" style="width: 500px; height: 500px;">
          <div id="explText" class ="undisplayed" style="width: 480px; height: 480px;"></div>
        </span>
        <!--================================================================-->


        <span align="left" style="display:inline-block; vertical-align:top; margin:30px;">
            <label for="option" style="margin-right:-100px; margin-bottom:15px">
                <h4>Choose an output option:</h4>
            </label>

            <br>
            <!-- Defines the button and label displayed for the option "fingerspell" -->
              <input type="radio" id="fingerspellDisplay" name="display" value="fingerspell" onclick="changeFunc(this);">
              <label for="fingerspell" style="margin-right:5px">Fingerspell</label>

            <br>
            <!-- Defines the button and label displayed for the option "freestyle" -->
            <input type="radio" id="freestyleDisplay" name="display" value="freestyle" checked onclick="changeFunc(this);">
            <label for="freestyle" style="margin-right:5px"  data-toggle="tooltip" data-placement="bottom" title="This functionality is experimental. Accuracy of the translation cannot be guaranteed.">Avatar translation</label>

             <br>
             <!-- Defines the button and questioncircle displayed for the option "avatar" -->
              <input type="radio" id="explainDisplay" name="display" value="explain" onclick="changeFunc(this);">
              <label for="avatar" style="margin-right: 5px">Explanation SiGML</label>


              <br>
              <br>

              <input id="mySiGML" type="text" name="mySiGML" style="width: 100%;" placeholder="Enter a word or sentence here">
              <br>

              <label id="tranLabel" for="translation" style="display:inline-block;">Translation: </label>
              <input id="translation" type="text" style="width:100%; display:inline-block; overflow-x: scroll;" readonly>
              <br>

              <br>
              <input type="button" class="btn btn-primary" value="Translate" onclick='callPython(document.getElementById("mySiGML").value);'/>
              <input type="button" id="stopButton" class="btn btn-primary" value="Stop" onclick='CWASA.stopSiGML();'/>

              <br>
              <br>
              <label id="speedLabel" for="speedAdj" style="display: inline-block;">Adjust speed: </label>
               <span id="speedAdj" class="CWASASpeed av0" style="margin-bottom:5px"></span>
              <br>
              <br>
              <label id="glossLabel"for="outputGloss" style="display: inline-block;">Gloss: </label>
              <input id="outputGloss" class="txtGloss av0" value="[none]" type="text">
              <br>

              <label for="suggestions" style="display: inline-block;">Suggestions box: </label>
              <br>
              <input id="suggestions" class="input" style="margin-top:5px; margin-bottom:10px; width: 400px;">
              <!-- <input type="button" value="Send" onclick='addSuggestion(document.getElementById("suggestions").value);' style="display: inline-block;" /> -->
        </span>

        <!-- <button id="echo" onclick='suggestions(document.getElementById("mySiGML").value);'>click !</button> -->

        <!-- FR: I've made the following progress fields invisible, if you comment them out completely the avatar doesn't work anymore -->
        <div align="center" class="undisplayed">

              <span style="font-size: 90%;" >
                Sign/Frame:
                <input id="mySF" class="txtSF" value="0/0" type="text" />
                &nbsp;
                Gloss:
                <input id="myGloss" class="txtGloss" value="[none]" type="text" />
                &nbsp;
                FPS:
                <input id="myFPS" class="txtFPS" value="00.00" type="text" />
              </span>
        </div>


        <div align="center">
            <!-- FR: I've made the following status log field invisible, if you comment it out completely the avatar doesn't work anymore -->
            <textarea id="myStatusLog"  class="statusLog undisplayed" rows="6">
            </textarea>
        </div>

        <br>


        <!-- SToCA applet element panel -->
        <!--================================================================-->
        <div class="SToCA" align="center" ></div>
        <!--================================================================-->
    </div>
</section>

<!--================================================================-->

<!-- Project info section -->
<section class="projects-section bg-light" id="People">

    <div class="container" height="100%">

        <div class="row align-items-start no-gutters mb-4 mb-lg-5">

            <!-- Column for Team -->
            <div class="col-xl-6 col-lg-6">
                
                <!-- Team -->
                <div class="project-text text-center text-lg-left">

                    

                    <h5>Principal investigator</h5>
                    <p class="text-black-50 mb-3">
                      <a href="https://www.florisroelofsen.com/" target="_blank">
                        Floris Roelofsen</a>,
                      University of Amsterdam<br>
                    </p>

                    <h5>
                      Researchers
                    </h5>
                    
                    <p class="text-black-50 mb-3">
                      Lyke Esselink, University of Amsterdam<br>
                      Shani Mende-Gillings, University of Amsterdam<br>
                    </p>

                    <h5>
                      Undergraduate student alumni
                    </h5>
                    
                     <p class="text-black-50 mb-3">
                      Lyke Esselink (2020)<br>
                      Shani Mende-Gillings (2020)<br>
                      Judith Corsel (2020)<br>
                      Jasmijn Bleijlevens (2020)<br>
                      Bram Smit (2019)<br>
                      Sander Brinkhuijsen (2019)<br>
                      Steven de Weille (2019)<br>
                      Nardi Lam (2018)<br>
                      Jetske Beks (2018)<br>
                    </p>
                    <!-- <hr class="d-none d-lg-block mb-0 ml-0" /> -->
                </div>

            </div>

            <!-- Column for collaborators -->

            <div class="col-xl-6 col-lg-6">
                
                <div class="project-text text-center text-lg-left">
                    <h5>
                      Collaborators and advisors 
                    </h5>

                    <p class="text-black-50 mb-3">
                      Beppie van den Bogaerde, University of Amsterdam<br>
                      Onno Crasborn, University of Nijmegen<br>
                      <a href="https://www.unige.ch/fti/en/faculte/departements/dtim/membrestim/david/" target="_blank">Bastien David</a>,
                        University of Geneva<br>
                      Roland Pfau, University of Amsterdam<br>
                      <a href="https://people.uea.ac.uk/j_glauert" target="_blank">John Glauert</a>, University of East Anglia<br>
                      Marijke Scheffener, University of Amsterdam<br>
                      Anika Smeijers, Amsterdam University Medical Centre<br>
                      Martine en Roos Wattel, <a href="https://www.wattelt.org/" target="_blank">Wat Telt!</a><br>
                    </p>
                </div>      
            </div>
        </div>


    </div>
</section>

<!--================================================================-->

<!-- Publications section -->
<section class="projects-section bg-white" id="Publications">

      <div class="container" height="100%">
          <div class="project-text pt-0 text-lg-left">
              <h2>Publications</h2>
              <p class="text-black-50 mb-0">
                To be added.
              </p>
              <!-- <hr class="d-none d-lg-block mb-0 ml-0" /> -->
          </div>
      </div>

</section>

<!--================================================================-->

<!-- Funding section -->
<section class="projects-section bg-white" id="Funding">

      <div class="container" height="100%">
          <div class="project-text pt-0 text-lg-left">
              <h2>Funding</h2>
              <p class="text-black-50 mb-0">
                We gratefully acknowledge funding from the Netherlands Organisation for Innovation in Healthcare (ZonMw) through the
                <a href="https://www.zonmw.nl/nl/over-zonmw/coronavirus/programmas/programma-detail/covid-19-programma/" target="_blank">COVID-19 programme</a>.
              </p>
              <!-- <hr class="d-none d-lg-block mb-0 ml-0" /> -->
          </div>
      </div>

</section>

<!--================================================================-->


<!-- Tutorial section -->
<section class="projects-section bg-white" id="Tutorial">

      <div class="container" height="100%">
          <div class="project-text pt-0 text-lg-left">
              <h2>Tutorial</h2>
              <p class="text-black-50 mb-0">
                To be added.
              </p>
              <!-- <hr class="d-none d-lg-block mb-0 ml-0" /> -->
          </div>
      </div>

</section>

<!--================================================================-->

<!-- Resources section -->
<section class="projects-section bg-white" id="Resources">

      <div class="container" height="100%">
          <div class="project-text pt-0 text-lg-left">
              <h2>Further resources</h2>
              <p class="mb-3 text-black-50">
                The
                <a href="https://www.gebarencentrum.nl/" target="_blank">Dutch Sign Language Centre</a>
                offers an online video dictionary containing more than 16.000 signs in Sign Language of the Netherlands.
              </p>
              <p class="mb-3 text-black-50">
                On the 
                <a href="https://www.wattelt.org/corona/" target="_blank">Wattelt!</a> website
                you can find a video with general advice for health care professional with deaf patients in times of COVID-19.
                The video also teaches you fifteen essential signs.
              </p>
              <hr class="d-none d-lg-block mb-0 ml-0" />
          </div>
      </div>

</section>

<!--================================================================-->

<!-- Footer-->
<footer class="footer bg-light small text-center text-black-50"><div class="container">&copy;2020 SignLab Amsterdam</div></footer>


<!-- Javascripts -->

<!-- Jquery JS is loaded in the beginning, see above -->



</body>
</html>
